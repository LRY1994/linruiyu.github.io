<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="/static/css/all.css" />
    <title>大脸圆玉的博客</title>
    <script>
        var alist = document.getElementsByTagName("a");
        for(let i=0;i<alist.length;i++) if(alist[i].href.indexOf('#') < 0) alist[i].target="_blank"    
    </script>
</head>
<body>
    <div class="l-nav">
        <div class="nav-img">
    <img src="/static/img/avatar.png"/>
</div>


<ul>
    
        
            <li class="li-active"> <a href="/categories/Experience.html">Experience</a></li>
        
        
            <li > <a href="/categories/Reading.html">Reading</a></li>
        
    
        
            <li > <a href="/categories/Collection.html">Collection</a></li>
        
    
</ul>
    </div>
    <div class="r-box">
        <div class="article">
            <h1 class="title">基于hexo搭建博客过程</h1>            
            <p>I belong to : Experience</p>
            <hr/>
            <p>我是一个很喜欢做笔记的人，老是写在word文档不方便。之前用jekyll搭了一个，感觉写得也是乱七八糟，页面也不好看，改的话不如重新重写一个好了</p>
<p>有了上次经验，觉得做一个东西真的要认真规划一下，不然做出来的东西老是迁就的感觉，能用就行。这样是不行的。像做一个产品来做它</p>
<p>源码地址  <a href="https://github.com/LRY1994/hexo-blog.git">https://github.com/LRY1994/hexo-blog.git</a></p>
<h2 id="问题定义">问题定义</h2>
<p>重构博客原因有下：</p>
<ol>
<li>Jkeyll目录文件关系得按照规定放置，灵活性差（虽然hexo也是这样）</li>
<li>日记页面不美观，想换，干脆重新规划做一个</li>
<li>学习一下怎么在github上弄1.0版本，2.0版本</li>
<li>jekyll显示markdown不好看</li>
</ol>
<p>参考<a href="https://www.jianshu.com/p/c4f145fdd637">博客搭建可行性方案( jekyll , hexo , Wordpress )</a></p>
<p>较多人采用的博客搭建方案有如下几种：</p>
<ol>
<li>Git+Github+Markdown+jekyll （免费）</li>
<li>Git+Github+Markdown+hexo （免费）</li>
<li>虚拟主机＋插件＋Wordpress （付费）</li>
</ol>
<p>为了省钱，所以选择第二种</p>
<h2 id="可行性研究">可行性研究</h2>
<p>毋庸置疑，可行</p>
<h2 id="需求分析">需求分析</h2>
<p>分为工作、学习、生活三个模块</p>
<ul>
<li>工作<ul>
<li>简历 (制作简历网页，jekyll那个是直接把简历模板copy过来的)</li>
</ul>
</li>
<li>学习<ul>
<li>笔记 （可按时间、类别分类）<ul>
<li>读书笔记（以书籍为单位来）</li>
<li>随笔笔记（在生活中遇到的问题或者想要摘录的，以月为单位）</li>
<li>专题笔记（围绕某个东西的笔记，以主题为单位）</li>
</ul>
</li>
<li>项目<ul>
<li>项目一</li>
<li>项目二 等</li>
</ul>
</li>
<li>用户体验（把有时候产品用得不愉快的经历记录下来，一篇，不定时更新）</li>
</ul>
</li>
<li>生活<ul>
<li>减肥 <ul>
<li>运动日历 （因为办了健身卡 ）</li>
<li>减脂餐图栏</li>
</ul>
</li>
<li>护肤化妆心得 （我一直都有颗当美妆博主的心）</li>
<li>旅游攻略 （喜欢旅游，但不可以经常旅游，所以很珍惜每一次，都想把它记录下来）</li>
</ul>
</li>
<li>其他<ul>
<li>社区账号（比较常用segmentfault/weibo/V2EX）</li>
<li>聊天框</li>
</ul>
</li>
</ul>
<h2 id="概要设计">概要设计</h2>
<p>输出原型图
使用mockplus</p>
<h2 id="详细设计">详细设计</h2>
<h2 id="编码和单元测试">编码和单元测试</h2>
<h2 id="集成测试">集成测试</h2>
<p>最终部署在github</p>
<ol>
<li><p>Permission denied (publickey)错误
 解决方法
 <a href="https://www.cnblogs.com/xsilence/p/6001938.html">针对github权限导致hexo部署失败的解决方案</a></p>
</li>
<li><p>和jekyll不同，<code>hexo d</code>会覆盖掉github仓库的代码，试了创建两个分支，比较麻烦，放弃。建立两个仓库，一个放源代码，一个放生成代    码。注意，生成代码需要放在master分支上，跟jekyll一样，生成代码的项目名字要取名为<code>username.github.io</code></p>
</li>
<li><p>使用next主题的时候需要在_config.yml把<code>permalink: :title</code>中改成
 <code>permalink: :title.html</code>
 不然点击文章的时候会出现下载框</p>
</li>
<li><p>about页面需要自己创建，并且自己写。</p>
<p> 大容器页面布局默认_layout布局，在<code>theme/next/layout_layout.swig</code>中定义。</p>
<p> 全部页面都是默认page布局，在<code>theme/next/layout/page.swig</code>中定义。</p>
<p> 只有archive,tag,category页面不用创建，直接在<code>theme/next/layout/</code>对应名字文件里面写，即</p>
<p> <code>theme/next/layout/archive.swig</code></p>
<p> <code>theme/next/layout/category.swig</code></p>
<p> <code>theme/next/layout/tag.swig</code></p>
<p> 但是tag,category页面还需要多做一步：</p>
<pre><code> $ cd your-hexo-site
 $ hexo new page tags</code></pre><p> 编辑刚新建的页面，将页面的类型设置为 tags ，主题将自动为这个页面显示标签云。页面内容如下：</p>
<pre><code> title: 标签
 date: 2014-12-22 12:39:04
 type: &quot;tags&quot;</code></pre><p> 在菜单中添加链接。编辑 主题配置文件 ， 添加 tags 到 menu 中，如下:</p>
<pre><code> menu:
 home: /
 archives: /archives
 tags: /tags</code></pre></li>
<li><p>换了主题重新部署，需要重新打包</p>
<pre><code> hexo clean
 hexo g
 hexo d</code></pre><p> 这个需要一段时间githubPage才会更新</p>
</li>
<li><p>写文章的时候要插入图片 </p>
<p> (1) 按照<a href="https://hexo.io/zh-cn/docs/asset-folders.html">官方说法</a></p>
<pre><code>     _posts

         |- post1.md

         |_ post1

             |- pic1.png</code></pre><ol>
<li><p>首先确认_config.yml中有：
```post_asset_folder: true``</p>
</li>
<li><p>安装</p>
<p><code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code></p>
<p>{% asset_img 图片文件名 [title] %}这样可以插入文章资源目录下的图片</p>
<p>(2) 还是写正常的markdown,<code>![](./img.png)</code>,<code>hexo g</code>生成public文件夹之后，把图片复制到改目录下，再<code>hexo d</code></p>
<p>(3) 看到还有一个解决方法，没试过
<a href="http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/">http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/</a></p>
</li>
</ol>
</li>
<li><p>添加文章阅读量
<a href="http://www.jeyzhang.com/hexo-next-add-post-views.html">添加文章阅读量</a></p>
</li>
</ol>
<h2 id="软件维护">软件维护</h2>
<p>管理博客</p>
<h2 id="总结">总结</h2>
<pre><code>最后发现hexo并不能实现博客以外的东西，可能它的定位就是博客框架吧。
而且hexo和next都不可以自定义layout,Jekyll还可以自定义layout放置在_layout目录下</code></pre>
        </div>
    </div>
    
</body>
</html>