<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="/static/css/all.css" />
    <title>大脸圆玉的博客</title>
</head>
<body>

    <div class="l-nav">
        <div class="nav-img">
    <img src="/static/img/avatar.png"/>
</div>


<ul>
    
        
            <li > <a href="/categories/Experience.html">Experience</a></li>
        
    
        
            <li class="li-active"> <a href="/categories/Reading.html">Reading</a></li>
        
        
            <li > <a href="/categories/Collection.html">Collection</a></li>
        
    
</ul>
    </div>
    <div class="r-box">
        <div class="article">
            <h1 class="title">读《Learning Javascript Design Patterns》 -Addy Osmani</h1>            
            <p>I belong to : Reading</p>
            <hr/>
            <h1 id="《learning-javascript-design-patterns》--addy-osmani-人民邮电出版社">《Learning Javascript Design Patterns》 -Addy Osmani 人民邮电出版社</h1>
<h2 id="创建对象的三种方法">创建对象的三种方法</h2>
<pre><code class="language-javascipt">obj={};
obj=new Object();
obj=Object.create(null)</code></pre>
<h2 id="设计模式类别">设计模式类别</h2>
<h3 id="创建型">创建型</h3>
<ul>
<li>Constructor</li>
<li><a href="#Prototype.js">Prototype</a></li>
<li><a href="#Singleton.js">Singleton</a></li>
<li><a href="#Factory.js">Factory</a></li>
<li><a href="#Abstract-Factory.js">Abstarct</a></li>
<li>Builder<h3 id="机构型">机构型</h3>
</li>
<li>Decorator</li>
<li>Facade : 和<a href="#Module.js">Module</a>类似</li>
<li>Flyweight</li>
<li>Adapter</li>
<li>Proxy<h3 id="行为型">行为型</h3>
</li>
<li>Iterator</li>
<li><a href="https://github.com/LRY1994/nice-code/blob/master/designPattern/Mediator.js">Mediator</a></li>
<li><a href="#Observer.js">Observer</a></li>
<li><a href="#Publich-Subscribe.js">Publich-Subscribe</a></li>
<li>Visitor</li>
</ul>
<p>Observer和Publich-Subscribe的区别</p>
<img src="./design-pattern/observer.png">
<img src="./design-pattern/publish-suscriber.png">

<h1 id="prototypejs">Prototype.js</h1>
<pre><code class="language-js">//Object.create
var vehicle = {
    getModel:function(){
        console.log(this.model);
    }
};
var car = Object.create(vehicle,{
    &quot;id&quot;:{
        value:1,
        enumerable:true
    },
    &quot;model&quot;:{
        value:&quot;Ford&quot;,
        enumerable:true
    }
});

//function F(){}
var beget = (function({
    function F(){};
    return function(_proto_){
        F.prototype=_proto_;
        return new F();
    }
}))();

var car =beget(vehicle);</code></pre>
<h1 id="singletonjs">Singleton.js</h1>
<pre><code class="language-js">//Singleton单例模式
var singleTon = (function(){
    var instance;
    function init(){
        function privateMethod(){}
        var privateVar = &#39;privateVar&#39;;
        return {
            publicMethod :function(){},
            publicVar : &#39;publicVar&#39;
        }
    }
    return{
        getInstance:function(){
            if(!instance){ instance = init(); }
            return instance;
        }
    }
})

var singleTon2 = (function(){
    var instance;
    var _static ={}
    function singleTon(opt){//构造函数
        options = opt ||{};
        this.point = opt.point;
        this.privateMethod = function(){}
    }
    var _satic = {
        name :&#39;singleTon&#39;,
        getInstance:function(opt){
            if(!instance){ instance = new singleTon(opt); }
            return instance;
        }
    };
    return _static;
})

singleTonTest = singleTon2.getInstance({point:5})</code></pre>
<h1 id="factoryjs">Factory.js</h1>
<pre><code class="language-js">//Factory.js
function Car(options){
    this.doors = options.doors ||4;
    this,color = options.color||&#39;silver&#39;;
}
function Trunk(options){
    this.weelSize=options.weelSize||&#39;large&#39;;
    this.color =options.color||&#39;blue&#39;;
}
function VehicleFactory(){}
VehicleFactory.prototype.vehicleClass = Car;
VehicleFactory.prototype.createVehicle = function(options){
    if(options.vehicleTtype == &#39;car&#39;){
        this.vehicleClass=Car;
    }else{
        this.vehicleClass = Truck;
    }
    return new this.vehicleClass(options);
}
//use
var carFactory=new VehicleFactory();
var car=carFactory.createVehicle({
    vehicleTtype:&#39;car&#39;,
    doors:6,
    color:&#39;yellow&#39;
})
var trunk = carFactory.createVehicle({
    vehicleTtype:&#39;trunk&#39;,
    color:&#39;red&#39;,
    weelSize:&#39;small&#39;
})</code></pre>
<h1 id="abstract-factoryjs">Abstract-Factory.js</h1>
<pre><code class="language-js">//Factory.js
function Car(options){
    this.doors = options.doors ||4;
    this.color = options.color||&#39;silver&#39;;
}
function Trunk(options){
    this.weelSize=options.weelSize||&#39;large&#39;;
    this.color =options.color||&#39;blue&#39;;
}
var AbstractFactory=(function(){
    var types={};
    return{
        getVehicle:function(type,options){
            var Vehicle = types[type];
            return Vehicle? new Vehicle(options):null
        },
        registerVehicle:function(ty,vehicle){//这个必须有
            var proto = vehicle.prototype;
            if(proto.drive&amp;&amp;proto.breakDown){
                types[type]=vehicle
            }
            return AbstractFactory;
        }

    }
})();

//use
AbstractFactory.registerVehicle(&quot;car&quot;,Car);
AbstractFactory.registerVehicle(&quot;truck&quot;,Trunk);
var car = AbstractFactory.getVehicle(&quot;car&quot;,{
    door:6,
    color:&#39;red&#39;
});
var trunk = AbstractFactory.getVehicle(&quot;trunk&quot;,{
    weelSize:&#39;small&#39;,
    color:&#39;red&#39;
})</code></pre>
<h1 id="observerjs">Observer.js</h1>
<pre><code class="language-js">//Observer 
{//观察者
function Observer()
    this.observerList = [];
}
Observer.prototype.get = function(index){
    return this.observerList[index]
}
Observer.prototype.add = function(ConcreteOberver){
    return this.observerList.push(ConcreteOberver)
}
//目标
function Subject(){
    this.observers=new Observer();
}
//具体观察者注册到目标
Subject.prototype.add = function(ConcreteOberver){
    this.observers.add(ConcreteOberver)
}
//目标发生变化，调度观察者
Subject.prototype.notify = function(context){
    for(let i=0;i&lt;this.observers.count();i++){
        this.observers.get(i).update(context)
    }
}
//具体观察者
function ConcreteOberver(){
    this.update = function(){}
}</code></pre>
<h1 id="publich-subscribejs">Publich-Subscribe.js</h1>
<pre><code class="language-js">//Publish/Subscribe

var pubsub={};//调度中心
(function(q){
    var topics={},subUid = -1;
    q.publish = function(topic,args){
        if(!topics[topic]) return false;
        var subscribers = topics [ topic];
        var len = subscribers? subscribers.length:0;
        while(len -- ){
            subscribers[len].func(topic,args)
        }
    };
    q.subscribe = function(topic,func){
        if(!topics[topic]) topics[topic]=[];
        var token = (++subUid).toString();
        topics[topic].push({token :token,func:func});
        return token;
    };
    q.unsunscribe = function(token){
        for(var m in topics){
            if(topics[m]){
                for(let i=0,j=topics[m].length;i&lt;j;i++){
                    if(topics[m][i].token ==token){
                        topics[m].splice(i,1);
                        return token;
                    }
                }
            }
        }
        return this;
    }
})(pubsub)</code></pre>

        </div>
    </div>
    
</body>
<script type="text/javascript">
    //文章里面的外链都打开新窗口    
    var alist = document.querySelectorAll(".article a");
    for(let i=0;i<alist.length;i++) if(alist[i].href.indexOf('#') < 0) alist[i].target="_blank"    
</script>
</html>